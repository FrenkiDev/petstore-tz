:toc-title: Тестирование Планета.IBS
:author: pfadeev@IBS.ru , Павел Фадеев

= Тестовое задание:

Срок выполнения - 7 дней (само задание делается за 3 дня, но мы отталкиваемся от того что кандидат может иметь стороннюю загрузку, либо немного иной стек).

== Цель

    Напишите проект автотестов для сервиса https://petstore.swagger.io/

1. валидационные тесты на контроллеры (объем определяется исполнителем)
1. пользовательские сценарии (объем определяется исполнителем)

== Условия к заданию:

1. базовый сборщик - gradle
1. базовый фреймворк запуска тестов -TestNg
1. взаимодействие с тестируемым сервисом происходит с помощью RestAssured
1. в проекте используется Allure Framework для генерации отчетов
1. автотесты упакованы в Docker с использованием Docker Compose и переменных окружения, которые должны быть описаны в отдельном файле
1. файл README должен содержать подробное описание по работе с проектом
1. все создаваемые записи в сервисе должны удаляться после прогона тестов
1. передача проекта осуществляется через ссылку на git репозиторий с проектом
1. будет плюсом разработка понятного консольного логирования

== Описание пакетов и классов

1. endpoints - содержит классы с методами настройки запросов (заполнение значениями тел запросов) и хранит данные запроса
1. src/test/java/tests - пакет содержит функциональные тесты по проверке endpoint
1. src/test/java/usercases - пакет содержит функциональные тесты по проверке пользовательских сценариев
1. src/test/java/endpoints - пакет содержит классы по работе с endpoint (PageObject на сервис)
1. Sender - класс который занимается отправкой запросов согласно методу протокола HTTP/HTTPS (GET, POST,PUT, DELETE)
1. Endpoint - класс который хранит необходимую информацию для отправки проверки и настройки запросов (Путь endpoint, заголовки, пути к файлам с телами запросов и схем валидации ответов)

== Запуск тестов

*Собрать docker images*

1. Перейти в корень проекта
1. Запустить команду "docker build -t petstore-tz ."

*Запустить тесты из docker-compose*

1. Перейти в корень проекта
1. Заменить нужными значениями параметры BASE_URL и API_KEY в файле docker-compose.yml
[source,yaml]
include::docker-compose.yml[lines=10..11]

1. Запустить команду "docker-compose up"

== Артефакты проекта

*POM.XML*

[source,xml]
include::pom.xml[lines=4..7]

Свойства проекта

[source,xml]
include::pom.xml[lines=8..14]

Подключённые зависимости к проекту

[source,xml]
include::pom.xml[lines=16..67]

Плагины проекта

[source,xml]
include::pom.xml[lines=69..94]

*DOCKERFILE*

[source,txt]
include::Dockerfile[lines=2..13]

*DOCKERFILE*

[source,yaml]
include::docker-compose.yml[lines=2..12]

== Отчёт

*Сводный отчет*

image::src/test/resources/docs/img.png[alt="Сводный отчет"]

*Валидационные тесты endpoints Pet*

image::src/test/resources/docs/img_1.png[alt="Валидационные тесты endpoints Pet"]

*Пользовательские сценарии*

image::src/test/resources/docs/img_2.png[alt="Пользовательские сценарии"]
